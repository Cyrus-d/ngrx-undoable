!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["Redux-Undoable"]={})}(this,function(e){"use strict";!function(e){e[e.UNDO="redux-undoable/UNDO"]="UNDO",e[e.REDO="redux-undoable/REDO"]="REDO",e[e.GROUP="redux-undaoble/GROUP"]="GROUP"}(e.UndoableTypes||(e.UndoableTypes={}));var t=function(e){return e[e.length-1]},n=function(e){return e.slice(0,e.length-1)},r=function(e,t){return t?e.concat([t]):e},u=function(e){return(t=[]).concat.apply(t,e);var t},o=function(e,t){return e.length>t},a=function(e,t){return e.length>=t},i=function(e,t){return u(t).reduce(e,void 0)},p=function(e,t,n){return 0===n?t:p(e,e(t,n),--n)},f=function(e){return function(u,a){if(void 0===a&&(a=1),!o(u.past,a))return u;var p=t(u.past),f=r(u.future,p),c=n(u.past);return{past:c,present:i(e,c),future:f}}},c=function(e){return function(u,o){if(void 0===o&&(o=1),!a(u.future,o))return u;var p=t(u.future),f=r(u.past,p);return{past:f,present:i(e,f),future:n(u.future)}}},s=function(e,t,n){return{past:r(e.past,n),present:t,future:[]}},d=function(e,t,n,r){return r(e.present,t)?e:s(e,t,n)},l=function(e){return{getPresentState:function(e){return e.present},getPastStates:function(t){return t.past.slice(1,t.past.length).map(function(n,r){return i(e,t.past.slice(0,r+1))})},getFutureStates:function(t){return t.future.map(function(n,r){return i(e,t.past.concat(t.future.slice(0,r)))})}}};e.redo=function(t){return void 0===t&&(t=1),{type:e.UndoableTypes.REDO,payload:t}},e.undo=function(t){return void 0===t&&(t=1),{type:e.UndoableTypes.UNDO,payload:t}},e.group=function(){for(var t=[],n=0;arguments.length>n;n++)t[n-0]=arguments[n];return{type:e.UndoableTypes.GROUP,payload:t}},e.updateHistory=d,e.undoable=function(t,n,r){void 0===n&&(n={type:"INIT"}),void 0===r&&(r=function(e,t){return e===t});var u={past:[n],present:t(void 0,n),future:[]},o=f(t),a=c(t);return{reducer:function(n,i){switch(void 0===n&&(n=u),i.type){case e.UndoableTypes.UNDO:return p(o,n,i.payload);case e.UndoableTypes.REDO:return p(a,n,i.payload);case e.UndoableTypes.GROUP:return d(n,i.payload.reduce(t,n.present),i.payload,r);default:return d(n,t(n.present,i),i,r)}},selectors:l(t)}},Object.defineProperty(e,"__esModule",{value:!0})});
